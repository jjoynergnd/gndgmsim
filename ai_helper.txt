

******************* START OF FILES ***********************

src/screens/TeamPage.jsx:

import React, { useState } from "react";
import { useSelector } from "react-redux";

import { teams } from "../data/teams";
import seasonState from "../data/season/seasonState.json";
import { advanceSeason } from "../utils/seasonEngine";

import TeamHeader from "../components/team/TeamHeader";
import NextActionCard from "../components/season/NextActionCard";
import TeamTabs from "../components/team/TeamTabs";
import RosterTable from "../components/team/RosterTable";
import DepthChart from "../components/team/depthchart/DepthChart.jsx";
import StaffTable from "../components/team/StaffTable";
import FinancesPanel from "../components/team/FinancesPanel";
import StatsPanel from "../components/team/StatsPanel";
import PlayerModal from "../components/player/PlayerModal";
import ScheduleTab from "../components/team/schedule/ScheduleTab";
import DivisionStandings from "../components/standings/DivisionStandings";
import PlayoffsTab from "../components/team/playoffs/PlayoffsTab";


// dynamic imports
const rosterMap = import.meta.glob("../data/rosters/*.json", { eager: true });
const staffMap = import.meta.glob("../data/staff/*.json", { eager: true });
const scheduleMap = import.meta.glob("../data/schedules/*.json", { eager: true });
const metaMap = import.meta.glob("../data/meta/*.json", { eager: true });

const normalize = (obj) => {
  const out = {};
  for (const path in obj) {
    const key = path.split("/").pop().replace(".json", "");
    out[key] = obj[path].default;
  }
  return out;
};

const rosters = normalize(rosterMap);
const staff = normalize(staffMap);
const schedules = normalize(scheduleMap);
const meta = normalize(metaMap);

const TeamPage = () => {
  const selectedTeam = useSelector((state) => state.team.selectedTeam);
  const team = teams.find((t) => t.id === selectedTeam);

  const [tab, setTab] = useState("roster");
  const [selectedPlayer, setSelectedPlayer] = useState(null);

  const [season, setSeason] = useState(() => {
    console.log("[TeamPage] Initial season state from JSON:", seasonState);
    return seasonState;
  });

  const handlePlayerClick = (player) => setSelectedPlayer(player);

  const canAdvance = true;
  const warnings = [];

  if (season.warnings?.injuries > 0)
    warnings.push(`${season.warnings.injuries} injured starters`);
  if (season.warnings?.depthChartIssues > 0)
    warnings.push("Depth chart incomplete");
  if (season.warnings?.capOver)
    warnings.push("Over the salary cap");

  const handleAdvance = () => {
    console.log(
      "[TeamPage] Advance clicked — phase:",
      season.phase,
      "week:",
      season.week,
      "preseasonWeek:",
      season.preseasonWeek,
      "offseasonStep:",
      season.offseasonStep
    );

    setSeason((prev) => {
      const next = advanceSeason(prev, {
        teams,
        schedules
      });
      console.log("[TeamPage] Season after advanceSeason:", next);
      return next;
    });
  };


  // Source of truth for schedule:
  // 1) Engine-populated league schedules (season.schedules[teamId])
  // 2) Fallback to static JSON if engine not initialized yet
  const activeSchedule =
    season.schedules?.[selectedTeam] || schedules[selectedTeam] || [];

  if (!team) {
    return <div style={{ padding: "24px" }}>Select a team to begin.</div>;
  }

  return (
    <div style={{ paddingBottom: "40px" }}>
      <TeamHeader
        team={team}
        season={season}
        meta={meta[selectedTeam]}
      />

      {/* Roadmap removed here to reduce clutter; global shell roadmap remains */}

      <NextActionCard
        season={season}
        onAdvance={handleAdvance}
        canAdvance={canAdvance}
        warnings={warnings}
      />

      <div style={{ height: "12px" }} />

      <TeamTabs tab={tab} setTab={setTab} />

      <div style={{ marginTop: "20px" }}>
        {tab === "roster" && (
          <RosterTable
            roster={rosters[selectedTeam]}
            onPlayerClick={handlePlayerClick}
          />
        )}

        {tab === "depthChart" && (
          <DepthChart
            roster={rosters[selectedTeam]}
            onPlayerClick={handlePlayerClick}
          />
        )}

        {tab === "staff" && (
          <StaffTable
            staff={staff[selectedTeam]}
            onPlayerClick={handlePlayerClick}
          />
        )}

        {tab === "finances" && (
          <FinancesPanel meta={meta[selectedTeam]} />
        )}

        {tab === "schedule" && (
          <ScheduleTab schedule={activeSchedule} />
        )}

        {tab === "Standings" && (
          <DivisionStandings
            teams={teams}
            userTeam={team}
            season={season}
          />
        )}

        {tab === "playoffs" && (
          <PlayoffsTab
            season={season}
            userTeamId={selectedTeam}
          />
        )}


        {tab === "stats" && <StatsPanel />}
      </div>

      <PlayerModal
        player={selectedPlayer}
        onClose={() => setSelectedPlayer(null)}
      />
    </div>
  );
};

export default TeamPage;





**********************


src/utils/seasonEngine.js:

// src/utils/playoffEngine.js
import { teams } from "../data/teams";

// ---------- helpers ----------

function sortStandings(a, b) {
  if (b.wins !== a.wins) return b.wins - a.wins;
  const diffA = a.pointsFor - a.pointsAgainst;
  const diffB = b.pointsFor - b.pointsAgainst;
  return diffB - diffA;
}

function rand(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function simulateGame(home, away) {
  const homeScore = rand(17, 38);
  const awayScore = rand(14, 34);
  return { home, away, homeScore, awayScore };
}

function getConference(teamId) {
  const t = teams.find((x) => x.id === teamId);
  return t?.conference || null;
}

// ---------- initialization ----------

export function initializePlayoffs(season) {
  const standings = Object.entries(season.teams).map(([id, rec]) => ({
    id,
    ...rec
  }));

  const byConf = { AFC: [], NFC: [] };
  standings.forEach((t) => {
    const meta = teams.find((x) => x.id === t.id);
    if (!meta) return;
    byConf[meta.conference].push(t);
  });

  byConf.AFC.sort(sortStandings);
  byConf.NFC.sort(sortStandings);

  const seedsAFC = byConf.AFC.slice(0, 7).map((t, i) => ({
    id: t.id,
    seed: i + 1
  }));
  const seedsNFC = byConf.NFC.slice(0, 7).map((t, i) => ({
    id: t.id,
    seed: i + 1
  }));

  season.playoffs = {
    initialized: true,
    seedsByConference: {
      AFC: seedsAFC,
      NFC: seedsNFC
    },
    bracket: {
      WILDCARD: {
        AFC: buildWildcardRound(seedsAFC, "AFC"),
        NFC: buildWildcardRound(seedsNFC, "NFC")
      },
      DIVISIONAL: {
        AFC: [],
        NFC: []
      },
      CONFERENCE: {
        AFC: [],
        NFC: []
      },
      SUPER_BOWL: {
        GAME: null
      }
    }
  };
}

function buildWildcardRound(seeds, conf) {
  // seeds[0] is #1 (bye)
  const s2 = seeds[1];
  const s3 = seeds[2];
  const s4 = seeds[3];
  const s5 = seeds[4];
  const s6 = seeds[5];
  const s7 = seeds[6];

  const makeGame = (high, low, idx) => ({
    id: `${conf}-WC-${idx}`,
    round: "WILDCARD",
    conference: conf,
    home: high.id,
    away: low.id,
    homeSeed: high.seed,
    awaySeed: low.seed,
    played: false,
    homeScore: null,
    awayScore: null,
    winner: null
  });

  return [
    makeGame(s2, s7, 1),
    makeGame(s3, s6, 2),
    makeGame(s4, s5, 3)
  ];
}

// ---------- round simulation ----------

export function simulatePlayoffRound(season) {
  const round = season.playoffRound;
  const { bracket, seedsByConference } = season.playoffs;

  if (round === "WILDCARD") {
    const results = [];

    ["AFC", "NFC"].forEach((conf) => {
      const games = bracket.WILDCARD[conf];
      games.forEach((g) => {
        if (g.played) return;
        const res = simulateGame(g.home, g.away);
        g.played = true;
        g.homeScore = res.homeScore;
        g.awayScore = res.awayScore;
        g.winner = res.homeScore > res.awayScore ? g.home : g.away;
        results.push(formatResultLine(g));
      });

      // build divisional for this conference
      const seed1 = seedsByConference[conf].find((s) => s.seed === 1);
      const winners = games.map((g) => {
        const seed = seedsByConference[conf].find((s) => s.id === g.winner);
        return seed;
      });

      const divisionalGames = buildDivisionalRound(seed1, winners, conf);
      bracket.DIVISIONAL[conf] = divisionalGames;
    });

    return results.join("  ");
  }

  if (round === "DIVISIONAL") {
    const results = [];

    ["AFC", "NFC"].forEach((conf) => {
      const games = bracket.DIVISIONAL[conf];
      const winners = [];

      games.forEach((g) => {
        if (g.played) return;
        const res = simulateGame(g.home, g.away);
        g.played = true;
        g.homeScore = res.homeScore;
        g.awayScore = res.awayScore;
        g.winner = res.homeScore > res.awayScore ? g.home : g.away;
        winners.push(g.winner);
        results.push(formatResultLine(g));
      });

      // build conference championship for this conference
      if (winners.length === 2) {
        const [t1, t2] = winners;
        const s1 = season.playoffs.seedsByConference[conf].find(
          (s) => s.id === t1
        );
        const s2 = season.playoffs.seedsByConference[conf].find(
          (s) => s.id === t2
        );

        bracket.CONFERENCE[conf] = [
          {
            id: `${conf}-CONF-1`,
            round: "CONFERENCE",
            conference: conf,
            home: s1.seed < s2.seed ? t1 : t2,
            away: s1.seed < s2.seed ? t2 : t1,
            homeSeed: s1.seed < s2.seed ? s1.seed : s2.seed,
            awaySeed: s1.seed < s2.seed ? s2.seed : s1.seed,
            played: false,
            homeScore: null,
            awayScore: null,
            winner: null
          }
        ];
      }
    });

    return results.join("  ");
  }

  if (round === "CONFERENCE") {
    const results = [];
    const confWinners = {};

    ["AFC", "NFC"].forEach((conf) => {
      const games = bracket.CONFERENCE[conf];
      games.forEach((g) => {
        if (g.played) return;
        const res = simulateGame(g.home, g.away);
        g.played = true;
        g.homeScore = res.homeScore;
        g.awayScore = res.awayScore;
        g.winner = res.homeScore > res.awayScore ? g.home : g.away;
        confWinners[conf] = g.winner;
        results.push(formatResultLine(g));
      });
    });

    // build Super Bowl
    if (confWinners.AFC && confWinners.NFC) {
      const afcSeed = season.playoffs.seedsByConference.AFC.find(
        (s) => s.id === confWinners.AFC
      );
      const nfcSeed = season.playoffs.seedsByConference.NFC.find(
        (s) => s.id === confWinners.NFC
      );

      season.playoffs.bracket.SUPER_BOWL.GAME = {
        id: "SB-1",
        round: "SUPER_BOWL",
        conference: "CROSS",
        home: afcSeed.seed <= nfcSeed.seed ? confWinners.AFC : confWinners.NFC,
        away: afcSeed.seed <= nfcSeed.seed ? confWinners.NFC : confWinners.AFC,
        homeSeed: afcSeed.seed <= nfcSeed.seed ? afcSeed.seed : nfcSeed.seed,
        awaySeed: afcSeed.seed <= nfcSeed.seed ? nfcSeed.seed : afcSeed.seed,
        played: false,
        homeScore: null,
        awayScore: null,
        winner: null
      };
    }

    return results.join("  ");
  }

  if (round === "SUPER_BOWL") {
    const g = season.playoffs.bracket.SUPER_BOWL.GAME;
    if (!g || g.played) return "";

    const res = simulateGame(g.home, g.away);
    g.played = true;
    g.homeScore = res.homeScore;
    g.awayScore = res.awayScore;
    g.winner = res.homeScore > res.awayScore ? g.home : g.away;

    season.playoffs.champion = g.winner;

    return formatResultLine(g);
  }

  return "";
}

function buildDivisionalRound(seed1, wildcardWinners, conf) {
  // wildcardWinners: array of { id, seed }
  const seeds = wildcardWinners.map((s) => s.seed).sort((a, b) => a - b);
  // lowest remaining seed plays #1
  const lowestSeed = seeds[0];
  const otherSeeds = seeds.slice(1);

  const lowestTeam = wildcardWinners.find((s) => s.seed === lowestSeed);
  const [sA, sB] = otherSeeds;
  const teamA = wildcardWinners.find((s) => s.seed === sA);
  const teamB = wildcardWinners.find((s) => s.seed === sB);

  const games = [];

  // Game 1: #1 vs lowest remaining
  games.push({
    id: `${conf}-DIV-1`,
    round: "DIVISIONAL",
    conference: conf,
    home: seed1.id,
    away: lowestTeam.id,
    homeSeed: seed1.seed,
    awaySeed: lowestTeam.seed,
    played: false,
    homeScore: null,
    awayScore: null,
    winner: null
  });

  // Game 2: other two winners
  games.push({
    id: `${conf}-DIV-2`,
    round: "DIVISIONAL",
    conference: conf,
    home: teamA.seed < teamB.seed ? teamA.id : teamB.id,
    away: teamA.seed < teamB.seed ? teamB.id : teamA.id,
    homeSeed: teamA.seed < teamB.seed ? teamA.seed : teamB.seed,
    awaySeed: teamA.seed < teamB.seed ? teamB.seed : teamA.seed,
    played: false,
    homeScore: null,
    awayScore: null,
    winner: null
  });

  return games;
}

function formatResultLine(game) {
  const homeConf = getConference(game.home);
  
  const homeTeam = teams.find((t) => t.id === game.home);
  const awayTeam = teams.find((t) => t.id === game.away);

  const homeName = homeTeam
    ? `${homeTeam.city} ${homeTeam.mascot}`
    : game.home;
  const awayName = awayTeam
    ? `${awayTeam.city} ${awayTeam.mascot}`
    : game.away;

  return `${homeConf || ""} ${game.round}: ${homeName} ${game.homeScore} - ${awayName} ${game.awayScore}`;
}






****************************************

src/data/season/seasonState.json:

{
  "year": 2026,
  "phase": "OFFSEASON",
  "offseasonStep": "RESIGNINGS",
  "week": 0,
  "_initialized": false,
  "warnings": {
    "injuries": 0,
    "depthChartIssues": 0,
    "capOver": false
  },
  "lastResult": {
    "summary": "New franchise loaded",
    "details": "Offseason — RESIGNINGS"
  }
}


***********************************

schedule.json example - BAL:

 {
    "week": 1,
    "type": "PRESEASON",
    "opponent": "NO",
    "home": true,
    "played": false,
    "scoreFor": null,
    "scoreAgainst": null,
    "result": null,
    "overtime": false,
    "attendance": 76443,
    "notes": null
  },
  {
    "week": 2,
    "type": "PRESEASON",
    "opponent": "JAX",
    "home": false,
    "played": false,
    "scoreFor": null,
    "scoreAgainst": null,
    "result": null,
    "overtime": false,
    "attendance": 63618,
    "notes": null
  },
  {
    "week": 3,
    "type": "PRESEASON",
    "opponent": "NYJ",
    "home": true,
    "played": false,
    "scoreFor": null,
    "scoreAgainst": null,
    "result": null,
    "overtime": false,
    "attendance": 67968,
    "notes": null
  },
  {
    "week": 4,
    "type": "REGULAR_SEASON",
    "opponent": "DET",
    "home": false,
    "played": false,
    "scoreFor": null,
    "scoreAgainst": null,
    "result": null,
    "overtime": false,
    "attendance": 64834,
    "notes": null
  },
  {
    "week": 5,
    "type": "REGULAR_SEASON",
    "opponent": "PHI",
    "home": true,
    "played": false,
    "scoreFor": null,
    "scoreAgainst": null,
    "result": null,
    "overtime": false,
    "attendance": 62504,
    "notes": null


**************************************

src/data/teams.js:

export const teams = [
  // -------------------- AFC NORTH --------------------
  { id: "BAL", city: "BAL", mascot: "Nightwings", conference: "AFC", division: "North", color: "#5A4FCF" },
  { id: "CIN", city: "CIN", mascot: "Striped Fury", conference: "AFC", division: "North", color: "#F77F2F" },
  { id: "CLE", city: "CLE", mascot: "Forge Hounds", conference: "AFC", division: "North", color: "#A65A2E" },
  { id: "PIT", city: "PIT", mascot: "Ironhammers", conference: "AFC", division: "North", color: "#6E6E6E" },

  // -------------------- AFC EAST --------------------
  { id: "BUF", city: "BUF", mascot: "Frosthorns", conference: "AFC", division: "East", color: "#3A6FF7" },
  { id: "MIA", city: "MIA", mascot: "Neon Sharks", conference: "AFC", division: "East", color: "#00C9A7" },
  { id: "NE",  city: "NE",  mascot: "Liberty Knights", conference: "AFC", division: "East", color: "#34495E" },
  { id: "NYJ", city: "NYJ", mascot: "Green Flight", conference: "AFC", division: "East", color: "#2ECC71" },

  // -------------------- AFC SOUTH --------------------
  { id: "HOU", city: "HOU", mascot: "Red Guardians", conference: "AFC", division: "South", color: "#C0392B" },
  { id: "IND", city: "IND", mascot: "Blue Chargers", conference: "AFC", division: "South", color: "#2E86DE" },
  { id: "JAX", city: "JAX", mascot: "Jungle Strikers", conference: "AFC", division: "South", color: "#D4A017" },
  { id: "TEN", city: "TEN", mascot: "Thunder Titans", conference: "AFC", division: "South", color: "#5DADE2" },

  // -------------------- AFC WEST --------------------
  { id: "DEN", city: "DEN", mascot: "Storm Riders", conference: "AFC", division: "West", color: "#FF7F50" },
  { id: "KC",  city: "KC",  mascot: "Warforge", conference: "AFC", division: "West", color: "#D63031" },
  { id: "LV",  city: "LV",  mascot: "Black Spades", conference: "AFC", division: "West", color: "#555555" },
  { id: "LAC", city: "LAC", mascot: "Volt Surge", conference: "AFC", division: "West", color: "#4DA6FF" },

  // -------------------- NFC NORTH --------------------
  { id: "CHI", city: "CHI", mascot: "Wind Bears", conference: "NFC", division: "North", color: "#CA6F1E" },
  { id: "DET", city: "DET", mascot: "Motor Lions", conference: "NFC", division: "North", color: "#5DADE2" },
  { id: "GB",  city: "GB",  mascot: "Green Guardians", conference: "NFC", division: "North", color: "#27AE60" },
  { id: "MIN", city: "MIN", mascot: "Storm Vikings", conference: "NFC", division: "North", color: "#8E44AD" },

  // -------------------- NFC EAST --------------------
  { id: "DAL", city: "DAL", mascot: "Lone Stars", conference: "NFC", division: "East", color: "#2C3E50" },
  { id: "NYG", city: "NYG", mascot: "Empire Giants", conference: "NFC", division: "East", color: "#3A6FF7" },
  { id: "PHI", city: "PHI", mascot: "Sky Eagles", conference: "NFC", division: "East", color: "#1ABC9C" },
  { id: "WAS", city: "WAS", mascot: "Capital Command", conference: "NFC", division: "East", color: "#884EA0" },

  // -------------------- NFC SOUTH --------------------
  { id: "ATL", city: "ATL", mascot: "Firebirds", conference: "NFC", division: "South", color: "#E74C3C" },
  { id: "CAR", city: "CAR", mascot: "Panther Claw", conference: "NFC", division: "South", color: "#2980B9" },
  { id: "NO",  city: "NO",  mascot: "Golden Saints", conference: "NFC", division: "South", color: "#D4AC0D" },
  { id: "TB",  city: "TB",  mascot: "Bay Pirates", conference: "NFC", division: "South", color: "#C0392B" },

  // -------------------- NFC WEST --------------------
  { id: "ARI", city: "ARI", mascot: "Red Talons", conference: "NFC", division: "West", color: "#C0392B" },
  { id: "LAR", city: "LAR", mascot: "Royal Rams", conference: "NFC", division: "West", color: "#F1C40F" },
  { id: "SF",  city: "SF",  mascot: "Gold Rush", conference: "NFC", division: "West", color: "#D68910" },
  { id: "SEA", city: "SEA", mascot: "Stormhawks", conference: "NFC", division: "West", color: "#2ECC71" }
];


*************************

src/data/rosters - team.json example -- BAL:

"id": "BAL-QB-1",
    "team": "BAL",
    "teamName": "BAL",
    "name": "Shawn Predovic",
    "jerseyNumber": 93,
    "position": "QB",
    "side": "OFF",
    "depth": 1,
    "vitals": {
      "age": 21,
      "height": "5'11\"",
      "weight": 212,
      "college": "Odessaview",
      "experience": 1,
      "archetype": "Power",
      "handedness": "Right"
    },
    "contract": {
      "years": 2,
      "totalValue": 89963480,
      "capHit": 3452495,
      "deadCap": 9039754,
      "signingBonus": 12320653,
      "expiresYear": 2028,
      "contractType": "Standard"
    },
    "ratings": {
      "overall": 79,
      "potential": 83,
      "schemeFit": 89,
      "speed": 71,
      "acceleration": 91,
      "agility": 94,
      "strength": 93,
      "tackle": 74,
      "pursuit": 72,
      "manCoverage": 62,
      "zoneCoverage": 78,
      "kickPower": 90,
      "kickAccuracy": 64,
      "catching": 94,
      "routeRunning": 90,
      "release": 83,
      "throwPower": 90,
      "shortAccuracy": 80,
      "mediumAccuracy": 94,
      "deepAccuracy": 86
    },
    "traits": {
      "personality": "Calm",
      "devTrait": "Superstar",
      "clutch": "High",
      "injuryProne": "Medium",
      "workEthic": "Low",
      "leadership": "High"
    },
    "stats": {
      "season": {
        "games": 6,
        "statA": 102,
        "statB": 313
      },
      "career": {
        "games": 104,
        "statA": 3505,
        "statB": 2111
      }
    },
    "photo": "/player_faces/43.png"
  },


***************************************

src/components/season/NextActionCard.jsx:

import React from "react";
import styles from "./NextActionCard.module.css";

export default function NextActionCard({
  season,
  onAdvance,
  canAdvance = true,
  warnings = []
}) {
  if (!season) return null;

  const { title, subtitle, actionLabel } = getActionConfig(season);

  return (
    <div className={styles.container}>
      {/* LEFT COLUMN */}
      <div className={styles.leftCol}>
        <div className={styles.title}>{title}</div>
        <div className={styles.subtitle}>{subtitle}</div>

        {warnings.length > 0 && (
          <div className={styles.warningBlock}>
            <div className={styles.warningHeader}>Warnings</div>
            <ul className={styles.warningList}>
              {warnings.map((w, i) => (
                <li key={i}>{w}</li>
              ))}
            </ul>
          </div>
        )}
      </div>

      {/* MIDDLE COLUMN */}
      <div className={styles.middleCol}>
        <button
          className={`${styles.button} ${!canAdvance ? styles.disabled : ""}`}
          disabled={!canAdvance}
          onClick={() => canAdvance && onAdvance?.(season)}
        >
          {actionLabel}
        </button>
      </div>

      {/* RIGHT COLUMN */}
      <div className={styles.rightCol}>
        <div className={styles.resultBlock}>
          {season.lastResult?.summary && (
            <div className={styles.resultSummary}>
              {season.lastResult.summary}
            </div>
          )}
          {season.lastResult?.details && (
            <div className={styles.resultDetails}>
              {season.lastResult.details}
            </div>
          )}
        </div>
      </div>
    </div>
  );
}

function getActionConfig(season) {
  switch (season.phase) {
    case "PRESEASON":
      return {
        title: `Preseason — Week ${season.preseasonWeek}`,
        subtitle: `Preseason Week ${season.preseasonWeek}`,
        actionLabel: `Sim Preseason Week ${season.preseasonWeek}`
      };

    case "REGULAR_SEASON": {
      const prevWeekKey = `REGULAR_SEASON-${season.week - 1}`;
      const hasPrevWeek = season.gamesByKey?.[prevWeekKey];

      return {
        title: `Regular Season — Week ${season.week}`,
        subtitle: hasPrevWeek
          ? `Week ${season.week - 1} Complete`
          : `Ready to begin Week ${season.week}`,
        actionLabel: `Sim Week ${season.week}`
      };
    }

    case "PLAYOFFS":
      return {
        title: `Playoffs — ${season.playoffRound}`,
        subtitle: "Win or go home",
        actionLabel: "Sim Next Round"
      };

    case "OFFSEASON":
      return {
        title: `Offseason — ${season.offseasonStep}`,
        subtitle: "Team building phase",
        actionLabel: "Advance"
      };

    default:
      return {
        title: "Season",
        subtitle: "",
        actionLabel: "Advance"
      };
  }
}





**************************************

NextActionCard.module.css:

.container {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 20px;

  background: linear-gradient(
    145deg,
    rgba(0, 212, 255, 0.12),
    rgba(0, 212, 255, 0.04)
  );
  border: 1px solid rgba(0, 212, 255, 0.35);
  border-radius: 14px;
  padding: 16px 20px;
  box-shadow: var(--shadow);
  margin-bottom: 20px;
}

/* LEFT COLUMN */
.leftCol {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.title {
  font-size: 1rem;
  font-weight: 700;
}

.subtitle {
  font-size: 0.85rem;
  color: var(--color-text-muted);
}

/* WARNINGS BLOCK */
.warningBlock {
  margin-top: 6px;
}

.warningHeader {
  font-size: 0.75rem;
  color: var(--color-text-muted);
  margin-bottom: 2px;
}

.warningList {
  margin: 0;
  padding-left: 16px;
  color: #ff4444;
  font-size: 0.8rem;
  font-weight: 600;
}

/* MIDDLE COLUMN */
.middleCol {
  display: flex;
  justify-content: center;
}

.button {
  background: #3e4147;
  color: white;
  border: none;
  border-radius: 10px;
  padding: 10px 20px;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 14px rgba(11, 94, 215, 0.35);
}

.button:hover {
  transform: translateY(-1px);
  filter: brightness(1.05);
}

.disabled {
  opacity: 0.4;
  cursor: not-allowed;
  box-shadow: none;
}

/* RIGHT COLUMN */
.rightCol {
  display: flex;
  justify-content: flex-end;
}

.resultBlock {
  text-align: right;
}

.resultSummary {
  font-size: 0.85rem;
  font-weight: 700;
}

.resultDetails {
  font-size: 0.75rem;
  color: var(--color-text-muted);
}

/* MOBILE */
@media (max-width: 768px) {
  .container {
    grid-template-columns: 1fr;
    text-align: left;
  }

  .rightCol {
    justify-content: flex-start;
  }

  .resultBlock {
    text-align: left;
  }
}


****************************************

src/components/season/TeamSeasonRoadmap.jsx:

import React from "react";
import styles from "./TeamSeasonRoadmap.module.css";
import { getOffseasonSteps, getPlayoffRounds } from "../../utils/seasonEngine";

const PHASES = [
  { key: "PRESEASON", label: "Preseason" },
  { key: "REGULAR_SEASON", label: "Regular Season" },
  { key: "PLAYOFFS", label: "Playoffs" },
  { key: "OFFSEASON", label: "Offseason" },
];

export default function TeamSeasonRoadmap({ season, onSelectPhase }) {
  if (!season) return null;

  const currentIndex = PHASES.findIndex((p) => p.key === season.phase);
  const offseasonSteps = getOffseasonSteps();
  const playoffRounds = getPlayoffRounds();

  return (
    <div className={styles.container}>
      <div className={styles.title}>Season Progress</div>

      <div className={styles.phases}>
        {PHASES.map((phase, index) => {
          const isCompleted = index < currentIndex;
          const isActive = index === currentIndex;

          return (
            <div
              key={phase.key}
              className={`${styles.phase}
                ${isCompleted ? styles.completed : ""}
                ${isActive ? styles.active : ""}
                ${onSelectPhase ? styles.clickable : ""}
              `}
              onClick={() => onSelectPhase?.(phase.key)}
            >
              <div className={styles.phaseHeader}>
                <span>{phase.label}</span>

                {isActive &&
                  phase.key === "REGULAR_SEASON" &&
                  season.week && (
                    <span className={styles.subtle}>Week {season.week}</span>
                  )}

                {isActive &&
                  phase.key === "PLAYOFFS" &&
                  season.playoffRound && (
                    <span className={styles.subtle}>
                      {season.playoffRound.replace("_", " ")}
                    </span>
                  )}

                {isActive &&
                  phase.key === "OFFSEASON" &&
                  season.offseasonStep && (
                    <span className={styles.subtle}>
                      {season.offseasonStep.replace("_", " ")}
                    </span>
                  )}
              </div>

              {isActive && phase.key === "OFFSEASON" && (
                <div className={styles.subSteps}>
                  {offseasonSteps.map((step) => {
                    const isStepActive = step === season.offseasonStep;
                    return (
                      <div
                        key={step}
                        className={`${styles.subStep} ${
                          isStepActive ? styles.subStepActive : ""
                        }`}
                      >
                        {step.replace("_", " ")}
                      </div>
                    );
                  })}
                </div>
              )}

              {isActive && phase.key === "PLAYOFFS" && (
                <div className={styles.subSteps}>
                  {playoffRounds.map((round) => {
                    const isRoundActive = round === season.playoffRound;
                    return (
                      <div
                        key={round}
                        className={`${styles.subStep} ${
                          isRoundActive ? styles.subStepActive : ""
                        }`}
                      >
                        {round.replace("_", " ")}
                      </div>
                    );
                  })}
                </div>
              )}
            </div>
          );
        })}
      </div>
    </div>
  );
}


*********************************************

src/components/team/schedule/ScheduleTab.jsx

import React from "react";
import { teams } from "../../../data/teams";
import styles from "./ScheduleTab.module.css";

function getOpponentLabel(game) {
  if (game.result === "BYE" || game.opponent === null) return "BYE WEEK";

  const oppTeam = teams.find((t) => t.id === game.opponent);
  const oppName = oppTeam ? `${oppTeam.city} ${oppTeam.mascot}` : game.opponent;
  const prefix = game.home ? "vs" : "@";

  return `${prefix} ${oppName}`;
}

function getScoreLabel(game) {
  if (game.result === "BYE" || game.opponent === null) return "-";
  if (!game.played) return "—";
  return `${game.scoreFor} - ${game.scoreAgainst}`;
}

function getResultClass(result, styles) {
  if (result === "W") return styles.resultWin;
  if (result === "L") return styles.resultLoss;
  if (result === "T") return styles.resultTie;
  if (result === "BYE") return styles.resultBye;
  return styles.resultNeutral;
}

export default function ScheduleTab({ schedule }) {
  if (!schedule || schedule.length === 0) {
    return <div>No schedule available.</div>;
  }

  const regularSeasonGames = schedule
    .filter((g) => g.type === "REGULAR_SEASON")
    .sort((a, b) => a.week - b.week);

  return (
    <div className={styles.container}>
      <div className={styles.headerRow}>
        <div>Week</div>
        <div>Matchup</div>
        <div className={styles.center}>Score</div>
        <div className={styles.center}>Result</div>
      </div>

      {regularSeasonGames.map((game, idx) => (
        <div
          key={`${game.week}-${game.opponent ?? "BYE"}-${idx}`}
          className={styles.row}
        >
          <div>Week {game.week}</div>
          <div>{getOpponentLabel(game)}</div>
          <div className={`${styles.center} ${styles.score}`}>
            {getScoreLabel(game)}
          </div>
          <div
            className={`${styles.center} ${getResultClass(
              game.result,
              styles
            )}`}
          >
            {game.result === "BYE" ? "BYE" : game.result || ""}
          </div>
        </div>
      ))}
    </div>
  );
}



*********************************************

ScheduleTab.module.css:

.container {
  padding: 20px;
  background-color: #0f111a;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #fff;
}

.headerRow {
  display: grid;
  grid-template-columns: 80px 1fr 80px 70px;
  padding-bottom: 8px;
  border-bottom: 2px solid #00d4ff;
  font-weight: 700;
  color: #00d4ff;
}

.row {
  display: grid;
  grid-template-columns: 80px 1fr 80px 70px;
  padding: 10px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  transition: background 0.2s ease;
}

.row:hover {
  background: rgba(0, 212, 255, 0.08);
}

.center {
  text-align: center;
}

.score {
  font-weight: 700;
}

.resultWin {
  color: #2ecc71;
  font-weight: 700;
}

.resultLoss {
  color: #e74c3c;
  font-weight: 700;
}

.resultTie {
  color: #f1c40f;
  font-weight: 700;
}

.resultBye {
  color: #a0a0a0;
  font-weight: 600;
}

.resultNeutral {
  color: #a0a0a0;
}




*****************************************

src/components/standings/DivisionStandings.jsx:

import React from "react";
import styles from "./DivisionStandings.module.css";

function getRecord(season, teamId) {
  return season.teams?.[teamId] || {
    wins: 0,
    losses: 0,
    ties: 0,
    pointsFor: 0,
    pointsAgainst: 0
  };
}

function sortDivisionTeams(season, teamsInDivision) {
  return [...teamsInDivision].sort((a, b) => {
    const ra = getRecord(season, a.id);
    const rb = getRecord(season, b.id);

    if (rb.wins !== ra.wins) return rb.wins - ra.wins;
    if (rb.ties !== ra.ties) return rb.ties - ra.ties;

    const diffA = ra.pointsFor - ra.pointsAgainst;
    const diffB = rb.pointsFor - rb.pointsAgainst;

    return diffB - diffA;
  });
}

function renderConferenceColumn(conferenceName, teams, season, userTeam) {
  const divisions = ["North", "East", "South", "West"];

  return (
    <div className={styles.conferenceColumn}>
      <div className={styles.conferenceTitle}>{conferenceName}</div>

      {divisions.map((division) => {
        const divisionTeams = teams.filter(
          (t) => t.conference === conferenceName && t.division === division
        );

        if (divisionTeams.length === 0) return null;

        const sorted = sortDivisionTeams(season, divisionTeams);

        return (
          <div key={division} className={styles.divisionBlock}>
            <div className={styles.divisionTitle}>{division}</div>

            <div className={styles.headerRow}>
              <div>Team</div>
              <div className={styles.center}>W</div>
              <div className={styles.center}>L</div>
              <div className={styles.center}>T</div>
            </div>

            {sorted.map((team) => {
              const rec = getRecord(season, team.id);
              const highlight = userTeam && userTeam.id === team.id;

              return (
                <div
                  key={team.id}
                  className={`${styles.row} ${
                    highlight ? styles.rowHighlight : ""
                  }`}
                >
                  <div>{team.city} {team.mascot}</div>
                  <div className={styles.center}>{rec.wins}</div>
                  <div className={styles.center}>{rec.losses}</div>
                  <div className={styles.center}>{rec.ties}</div>
                </div>
              );
            })}
          </div>
        );
      })}
    </div>
  );
}

export default function DivisionStandings({ teams, userTeam, season }) {
  if (!season || !season.teams) {
    return <div>Standings unavailable.</div>;
  }

  return (
    <div className={styles.container}>
      {renderConferenceColumn("AFC", teams, season, userTeam)}
      {renderConferenceColumn("NFC", teams, season, userTeam)}
    </div>
  );
}




*************************************

DivisionStandings.module.css:

.container {
  display: flex;
  gap: 24px;
  align-items: flex-start;
  color: #fff;
}

.conferenceColumn {
  flex: 1;
  background-color: #0f111a;
  padding: 20px;
  border-radius: 12px;
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.conferenceTitle {
  font-size: 1.1rem;
  font-weight: 700;
  color: #00d4ff;
  border-bottom: 2px solid #00d4ff;
  padding-bottom: 4px;
}

.divisionBlock {
  background: #141625;
  padding: 12px;
  border-radius: 10px;
}

.divisionTitle {
  font-size: 0.9rem;
  font-weight: 600;
  color: #00d4ff;
  margin-bottom: 6px;
}

.headerRow {
  display: grid;
  grid-template-columns: 1.6fr 0.6fr 0.6fr 0.6fr;
  padding-bottom: 6px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.15);
  color: #a0a0a0;
  font-weight: 600;
}

.row {
  display: grid;
  grid-template-columns: 1.6fr 0.6fr 0.6fr 0.6fr;
  padding: 8px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  transition: background 0.2s ease;
}

.row:hover {
  background: rgba(0, 212, 255, 0.08);
}

.rowHighlight {
  background: rgba(0, 212, 255, 0.15);
}

.center {
  text-align: center;
}

@media (max-width: 768px) {
  .container {
    flex-direction: column;
  }
}

*****************************************

src/components/team/RosterTable.jsx:


import React from "react";
import RosterList from "./roster/RosterList";

const RosterTable = ({ roster, onPlayerClick }) => {
  return (
    <div style={{ marginTop: "16px" }}>
      <RosterList roster={roster} onPlayerClick={onPlayerClick} />
    </div>
  );
};

export default RosterTable;


**************************************

src/components/team/roster/RosterList.jsx:

import React from "react";
import styles from "./RosterList.module.css";

const RosterList = ({ roster, onPlayerClick }) => {
  if (!roster) return null;

  const groups = {};
  roster.forEach((p) => {
    if (!groups[p.position]) groups[p.position] = [];
    groups[p.position].push(p);
  });

  return (
    <div className={styles.container}>
      <div className={styles.header}>
        <div className={styles.position}>Pos</div>
        <div className={styles.name}>Name</div>
        <div className={styles.ovr}>OVR</div>
        <div className={styles.age}>Age</div>
      </div>

      {Object.keys(groups).map((pos) => {
        const groupClass = styles[`groupLabel_${pos}`] || styles.groupLabel;

        // Sort players by OVR descending
        const sortedPlayers = [...groups[pos]].sort(
          (a, b) => (b.ratings?.overall ?? 0) - (a.ratings?.overall ?? 0)
        );

        return (
          <div key={pos}>
            <div className={`${styles.groupLabel} ${groupClass}`}>
              {pos}
            </div>

            {sortedPlayers.map((player, idx) => {
              const ovr = player.ratings?.overall ?? "-";
              const ovrClass =
                ovr >= 90 ? styles.ovrElite :
                ovr >= 80 ? styles.ovrGreat :
                ovr >= 70 ? styles.ovrGood :
                styles.ovrLow;

              return (
                <div
                  key={idx}
                  className={styles.row}
                  onClick={() => onPlayerClick?.(player)}
                >
                  <div className={styles.position}>{player.position}</div>
                  <div className={styles.name}>{player.name}</div>
                  <div className={`${styles.ovr} ${ovrClass}`}>{ovr}</div>
                  <div className={styles.age}>{player.vitals?.age ?? "-"}</div>
                </div>
              );
            })}
          </div>
        );
      })}
    </div>
  );
};

export default RosterList;


******************************************

src/components/team/financesPanel.jsx (if we are tweaking finances tab i would prefer to scaffold similar to the other updated tabs (scr/components/team/finances: FinancesTab and FinancesTab.module.css

Same thing for stats...setup the same way



src/components/team/TeamHeader.jsx:

import React from "react";
import styles from "./TeamHeader.module.css";

const TeamHeader = ({ team, season, meta }) => {
  if (!team || !season) return null;

  const record = season.teams?.[team.id] || {
    wins: 0,
    losses: 0,
    ties: 0
  };

  const year = season.year ?? 2026;

  console.log("[TeamHeader] meta for team:", team.id, meta);

  const logoSrc = meta?.logo || meta?.logoUrl || null;
  const capSpace = meta?.capSpace ?? meta?.capRoom ?? null;

  return (
    <div className={styles.container}>
      {/* LEFT: LOGO + NAME */}
      <div className={styles.left}>
        <div className={styles.logoWrapper}>
          {logoSrc ? (
            <img
              src={logoSrc}
              alt={`${team.city} ${team.mascot}`}
              className={styles.logo}
            />
          ) : (
            <div
              className={styles.logoFallback}
              style={{ backgroundColor: team.color }}
            >
              {team.id}
            </div>
          )}
        </div>
        <div className={styles.teamInfo}>
          <div className={styles.teamName}>
            {team.city} {team.mascot}
          </div>
          <div className={styles.subline}>
            {team.conference} • {team.division}
          </div>
        </div>
      </div>

      {/* MIDDLE: RECORD + YEAR */}
      <div className={styles.middle}>
        <div className={styles.record}>
          {record.wins}-{record.losses}
          {record.ties ? `-${record.ties}` : ""}
        </div>
        <div className={styles.year}>Year {year}</div>
      </div>

      {/* RIGHT: CAP INFO */}
      <div className={styles.right}>
        {capSpace !== null && (
          <div className={styles.capBlock}>
            <div className={styles.capLabel}>Cap Space</div>
            <div className={styles.capValue}>
              ${Number(capSpace).toLocaleString()}
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

export default TeamHeader;

********************************************8

src/components/team/TeamHeader.module.css:

.container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(
    145deg,
    rgba(0, 212, 255, 0.12),
    rgba(0, 212, 255, 0.04)
  );
  border: 1px solid rgba(0, 212, 255, 0.35);
  border-radius: 14px;
  padding: 16px 20px;
  box-shadow: var(--shadow);
  margin-bottom: 20px;
}

/* LEFT SIDE — LOGO + TEAM NAME */
.left {
  display: flex;
  align-items: center;
  gap: 14px;
}

.logoWrapper {
  width: 64px;
  height: 64px;
  border-radius: 12px;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #222;
}

.logo {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.logoFallback {
  width: 100%;
  height: 100%;
  color: white;
  font-weight: 700;
  font-size: 1.2rem;
  display: flex;
  justify-content: center;
  align-items: center;
}

.teamInfo {
  display: flex;
  flex-direction: column;
}

.teamName {
  font-size: 1.2rem;
  font-weight: 700;
}

.subline {
  font-size: 0.85rem;
  color: var(--color-text-muted);
}

/* MIDDLE — RECORD + YEAR */
.middle {
  text-align: center;
}

.record {
  font-size: 1.4rem;
  font-weight: 700;
}

.year {
  font-size: 0.85rem;
  color: var(--color-text-muted);
}

/* RIGHT — CAP SPACE */
.right {
  text-align: right;
}

.capBlock {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.capLabel {
  font-size: 0.75rem;
  color: var(--color-text-muted);
}

.capValue {
  font-size: 1rem;
  font-weight: 700;
}

/* MOBILE */
@media (max-width: 768px) {
  .container {
    flex-direction: column;
    gap: 12px;
    text-align: center;
  }

  .right {
    text-align: center;
  }

  .capBlock {
    align-items: center;
  }
}


**************************************

scripts/generateAllTeamSchedules.js:
/* eslint-env node */

// scripts/generateAllTeamSchedules.js
import fs from "fs";
import path from "path";
import { fileURLToPath } from "url";
import { faker } from "@faker-js/faker";
import { teams } from "../src/data/teams.js";

// Fix __dirname in ES modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Output directory
const OUTPUT_DIR = path.join(__dirname, "../src/data/schedules");
if (!fs.existsSync(OUTPUT_DIR)) {
  fs.mkdirSync(OUTPUT_DIR, { recursive: true });
}

const TEAM_IDS = teams.map((t) => t.id);

function shuffle(array) {
  const arr = [...array];
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function createGame({ week, opponent, home, type }) {
  return {
    week,
    type,
    opponent,
    home,
    played: false,
    scoreFor: null,
    scoreAgainst: null,
    result: null,
    overtime: false,
    attendance:
      type === "REGULAR_SEASON"
        ? faker.number.int({ min: 55000, max: 78000 })
        : faker.number.int({ min: 45000, max: 70000 }),
    notes: null
  };
}

function groupTeams() {
  const byConfDiv = {};
  teams.forEach((t) => {
    if (!byConfDiv[t.conference]) byConfDiv[t.conference] = {};
    if (!byConfDiv[t.conference][t.division])
      byConfDiv[t.conference][t.division] = [];
    byConfDiv[t.conference][t.division].push(t.id);
  });

  Object.values(byConfDiv).forEach((divs) => {
    Object.keys(divs).forEach((d) => {
      divs[d] = divs[d].slice().sort();
    });
  });

  return byConfDiv;
}

/* -----------------------------
   STRUCTURED WEEK GENERATION
------------------------------*/

function buildStructuredWeeks() {
  const byConfDiv = groupTeams();
  const weeks = [];

  const conferences = ["AFC", "NFC"];
  const divisions = ["North", "East", "South", "West"];

  // 1️⃣ Division double round robin (6 weeks)
  for (let round = 0; round < 6; round++) {
    weeks.push([]);
  }

  conferences.forEach((conf) => {
    divisions.forEach((div) => {
      const [a, b, c, d] = byConfDiv[conf][div];

      const firstHalf = [
        [[a, b], [c, d]],
        [[a, c], [b, d]],
        [[a, d], [b, c]]
      ];

      const secondHalf = firstHalf.map((games) =>
        games.map(([home, away]) => [away, home])
      );

      [...firstHalf, ...secondHalf].forEach((games, i) => {
        games.forEach(([home, away]) => {
          weeks[i].push({ home, away });
        });
      });
    });
  });

  // 2️⃣ Intra-conference paired divisions (4 weeks)
  const intraPairs = [
    { conf: "AFC", a: "North", b: "East" },
    { conf: "AFC", a: "South", b: "West" },
    { conf: "NFC", a: "North", b: "East" },
    { conf: "NFC", a: "South", b: "West" }
  ];

  for (let i = 0; i < 4; i++) weeks.push([]);

  intraPairs.forEach(({ conf, a, b }) => {
    const A = byConfDiv[conf][a];
    const B = byConfDiv[conf][b];

    for (let weekOffset = 0; weekOffset < 4; weekOffset++) {
      for (let j = 0; j < 4; j++) {
        const home = (weekOffset + j) % 2 === 0 ? A[j] : B[(j + weekOffset) % 4];
        const away = home === A[j] ? B[(j + weekOffset) % 4] : A[j];
        weeks[6 + weekOffset].push({ home, away });
      }
    }
  });

  // 3️⃣ Cross-conference paired divisions (4 weeks)
  const crossPairs = [
    { afc: "North", nfc: "North" },
    { afc: "East", nfc: "East" },
    { afc: "South", nfc: "South" },
    { afc: "West", nfc: "West" }
  ];

  for (let i = 0; i < 4; i++) weeks.push([]);

  crossPairs.forEach(({ afc, nfc }) => {
    const A = byConfDiv["AFC"][afc];
    const B = byConfDiv["NFC"][nfc];

    for (let weekOffset = 0; weekOffset < 4; weekOffset++) {
      for (let j = 0; j < 4; j++) {
        const home = (weekOffset + j) % 2 === 0 ? A[j] : B[(j + weekOffset) % 4];
        const away = home === A[j] ? B[(j + weekOffset) % 4] : A[j];
        weeks[10 + weekOffset].push({ home, away });
      }
    }
  });

  // 4️⃣ Extra 3 structured conference rotation weeks
  for (let i = 0; i < 3; i++) weeks.push([]);

  conferences.forEach((conf) => {
    const north = byConfDiv[conf]["North"];
    const south = byConfDiv[conf]["South"];
    const east = byConfDiv[conf]["East"];
    const west = byConfDiv[conf]["West"];

    for (let round = 0; round < 3; round++) {
      for (let i = 0; i < 4; i++) {
        const home1 = round % 2 === 0 ? north[i] : south[(i + round) % 4];
        const away1 = home1 === north[i] ? south[(i + round) % 4] : north[i];

        const home2 = round % 2 === 0 ? east[i] : west[(i + round) % 4];
        const away2 = home2 === east[i] ? west[(i + round) % 4] : east[i];

        weeks[14 + round].push({ home: home1, away: away1 });
        weeks[14 + round].push({ home: home2, away: away2 });
      }
    }
  });

  // 5️⃣ Add a full Week 18 with random valid matchups (Option A1)
  const extraWeek = [];
  const shuffledTeams = shuffle(TEAM_IDS.slice()); // 32 teams
  for (let i = 0; i < shuffledTeams.length; i += 2) {
    const t1 = shuffledTeams[i];
    const t2 = shuffledTeams[i + 1];
    const homeFirst = Math.random() < 0.5;
    const home = homeFirst ? t1 : t2;
    const away = homeFirst ? t2 : t1;
    extraWeek.push({ home, away });
  }
  weeks.push(extraWeek); // now 18 weeks total

  return weeks; // 18 fully valid weeks
}

/* -----------------------------
   BYE WEEK ASSIGNMENT
------------------------------*/

function assignByeWeeks() {
  const byeWeeks = {}; // teamId → week
  const allowedWeeks = Array.from({ length: 11 }, (_, i) => i + 4); // 4–14
  const weekLoad = {}; // week → number of teams on bye

  allowedWeeks.forEach((w) => (weekLoad[w] = 0));

  const shuffledTeams = shuffle(TEAM_IDS);

  shuffledTeams.forEach((teamId) => {
    const possibleWeeks = shuffle(allowedWeeks);

    for (const w of possibleWeeks) {
      if (weekLoad[w] < 4) {
        byeWeeks[teamId] = w;
        weekLoad[w]++;
        break;
      }
    }
  });

  return byeWeeks;
}

/* -----------------------------
   BUILD TEAM WEEK MAP
------------------------------*/

function assignWeeks() {
  const structuredWeeks = buildStructuredWeeks(); // 18 weeks
  const shuffledWeeks = shuffle(structuredWeeks);

  const teamWeeks = {};
  TEAM_IDS.forEach((id) => (teamWeeks[id] = {}));

  // Fill 18 real weeks with games
  shuffledWeeks.forEach((games, index) => {
    const weekNumber = index + 1; // 1–18
    games.forEach(({ home, away }) => {
      teamWeeks[home][weekNumber] = { home, away };
      teamWeeks[away][weekNumber] = { home, away };
    });
  });

  // Assign byes across weeks 4–14 (exactly one per team)
  const byeWeeks = assignByeWeeks();

  TEAM_IDS.forEach((teamId) => {
    const byeWeek = byeWeeks[teamId];
    // Remove that week's game for this team → creates a bye
    delete teamWeeks[teamId][byeWeek];
  });

  return teamWeeks;
}

/* -----------------------------
   BUILD SCHEDULE FILES
------------------------------*/

function buildSchedules() {
  const teamWeeks = assignWeeks();
  const schedules = {};

  TEAM_IDS.forEach((teamId) => {
    const schedule = [];

    // Preseason
    const others = TEAM_IDS.filter((t) => t !== teamId);
    const preOpp = shuffle(others).slice(0, 3);

    preOpp.forEach((opp, i) => {
      schedule.push(
        createGame({
          week: i + 1,
          opponent: opp,
          home: i % 2 === 0,
          type: "PRESEASON"
        })
      );
    });

    // Regular season (weeks 1–18)
    for (let week = 1; week <= 18; week++) {
      const m = teamWeeks[teamId][week];

      if (!m) {
        schedule.push({
          week,
          type: "REGULAR_SEASON",
          opponent: null,
          home: false,
          played: false,
          scoreFor: null,
          scoreAgainst: null,
          result: "BYE",
          overtime: false,
          attendance: null,
          notes: "Bye week"
        });
      } else {
        const isHome = m.home === teamId;
        const opp = isHome ? m.away : m.home;

        schedule.push(
          createGame({
            week,
            opponent: opp,
            home: isHome,
            type: "REGULAR_SEASON"
          })
        );
      }
    }

    schedules[teamId] = schedule;
  });

  return schedules;
}

function generateAllSchedules() {
  console.log("[schedule-generator] Generating schedules...");
  const schedules = buildSchedules();

  TEAM_IDS.forEach((id) => {
    const file = path.join(OUTPUT_DIR, `${id}.json`);
    fs.writeFileSync(file, JSON.stringify(schedules[id], null, 2));
    console.log(`✓ Created schedule for ${id}`);
  });

  console.log("All schedules generated successfully.");
}

generateAllSchedules();


*********************************

src/utils/playoffEngine.js:

// src/utils/playoffEngine.js
import { teams } from "../data/teams";

// ---------- helpers ----------

function sortStandings(a, b) {
  if (b.wins !== a.wins) return b.wins - a.wins;
  const diffA = a.pointsFor - a.pointsAgainst;
  const diffB = b.pointsFor - b.pointsAgainst;
  return diffB - diffA;
}

function rand(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function simulateGame(home, away) {
  const homeScore = rand(17, 38);
  const awayScore = rand(14, 34);
  return { home, away, homeScore, awayScore };
}

function getConference(teamId) {
  const t = teams.find((x) => x.id === teamId);
  return t?.conference || null;
}

// ---------- initialization ----------

export function initializePlayoffs(season) {
  const standings = Object.entries(season.teams).map(([id, rec]) => ({
    id,
    ...rec
  }));

  const byConf = { AFC: [], NFC: [] };
  standings.forEach((t) => {
    const meta = teams.find((x) => x.id === t.id);
    if (!meta) return;
    byConf[meta.conference].push(t);
  });

  byConf.AFC.sort(sortStandings);
  byConf.NFC.sort(sortStandings);

  const seedsAFC = byConf.AFC.slice(0, 7).map((t, i) => ({
    id: t.id,
    seed: i + 1
  }));
  const seedsNFC = byConf.NFC.slice(0, 7).map((t, i) => ({
    id: t.id,
    seed: i + 1
  }));

  season.playoffs = {
    initialized: true,
    seedsByConference: {
      AFC: seedsAFC,
      NFC: seedsNFC
    },
    bracket: {
      WILDCARD: {
        AFC: buildWildcardRound(seedsAFC, "AFC"),
        NFC: buildWildcardRound(seedsNFC, "NFC")
      },
      DIVISIONAL: {
        AFC: [],
        NFC: []
      },
      CONFERENCE: {
        AFC: [],
        NFC: []
      },
      SUPER_BOWL: {
        GAME: null
      }
    }
  };
}

function buildWildcardRound(seeds, conf) {
  // seeds[0] is #1 (bye)
  const s2 = seeds[1];
  const s3 = seeds[2];
  const s4 = seeds[3];
  const s5 = seeds[4];
  const s6 = seeds[5];
  const s7 = seeds[6];

  const makeGame = (high, low, idx) => ({
    id: `${conf}-WC-${idx}`,
    round: "WILDCARD",
    conference: conf,
    home: high.id,
    away: low.id,
    homeSeed: high.seed,
    awaySeed: low.seed,
    played: false,
    homeScore: null,
    awayScore: null,
    winner: null
  });

  return [
    makeGame(s2, s7, 1),
    makeGame(s3, s6, 2),
    makeGame(s4, s5, 3)
  ];
}

// ---------- round simulation ----------

export function simulatePlayoffRound(season) {
  const round = season.playoffRound;
  const { bracket, seedsByConference } = season.playoffs;

  if (round === "WILDCARD") {
    const results = [];

    ["AFC", "NFC"].forEach((conf) => {
      const games = bracket.WILDCARD[conf];
      games.forEach((g) => {
        if (g.played) return;
        const res = simulateGame(g.home, g.away);
        g.played = true;
        g.homeScore = res.homeScore;
        g.awayScore = res.awayScore;
        g.winner = res.homeScore > res.awayScore ? g.home : g.away;
        results.push(formatResultLine(g));
      });

      // build divisional for this conference
      const seed1 = seedsByConference[conf].find((s) => s.seed === 1);
      const winners = games.map((g) => {
        const seed = seedsByConference[conf].find((s) => s.id === g.winner);
        return seed;
      });

      const divisionalGames = buildDivisionalRound(seed1, winners, conf);
      bracket.DIVISIONAL[conf] = divisionalGames;
    });

    return results.join("  ");
  }

  if (round === "DIVISIONAL") {
    const results = [];

    ["AFC", "NFC"].forEach((conf) => {
      const games = bracket.DIVISIONAL[conf];
      const winners = [];

      games.forEach((g) => {
        if (g.played) return;
        const res = simulateGame(g.home, g.away);
        g.played = true;
        g.homeScore = res.homeScore;
        g.awayScore = res.awayScore;
        g.winner = res.homeScore > res.awayScore ? g.home : g.away;
        winners.push(g.winner);
        results.push(formatResultLine(g));
      });

      // build conference championship for this conference
      if (winners.length === 2) {
        const [t1, t2] = winners;
        const s1 = season.playoffs.seedsByConference[conf].find(
          (s) => s.id === t1
        );
        const s2 = season.playoffs.seedsByConference[conf].find(
          (s) => s.id === t2
        );

        bracket.CONFERENCE[conf] = [
          {
            id: `${conf}-CONF-1`,
            round: "CONFERENCE",
            conference: conf,
            home: s1.seed < s2.seed ? t1 : t2,
            away: s1.seed < s2.seed ? t2 : t1,
            homeSeed: s1.seed < s2.seed ? s1.seed : s2.seed,
            awaySeed: s1.seed < s2.seed ? s2.seed : s1.seed,
            played: false,
            homeScore: null,
            awayScore: null,
            winner: null
          }
        ];
      }
    });

    return results.join("  ");
  }

  if (round === "CONFERENCE") {
    const results = [];
    const confWinners = {};

    ["AFC", "NFC"].forEach((conf) => {
      const games = bracket.CONFERENCE[conf];
      games.forEach((g) => {
        if (g.played) return;
        const res = simulateGame(g.home, g.away);
        g.played = true;
        g.homeScore = res.homeScore;
        g.awayScore = res.awayScore;
        g.winner = res.homeScore > res.awayScore ? g.home : g.away;
        confWinners[conf] = g.winner;
        results.push(formatResultLine(g));
      });
    });

    // build Super Bowl
    if (confWinners.AFC && confWinners.NFC) {
      const afcSeed = season.playoffs.seedsByConference.AFC.find(
        (s) => s.id === confWinners.AFC
      );
      const nfcSeed = season.playoffs.seedsByConference.NFC.find(
        (s) => s.id === confWinners.NFC
      );

      season.playoffs.bracket.SUPER_BOWL.GAME = {
        id: "SB-1",
        round: "SUPER_BOWL",
        conference: "CROSS",
        home: afcSeed.seed <= nfcSeed.seed ? confWinners.AFC : confWinners.NFC,
        away: afcSeed.seed <= nfcSeed.seed ? confWinners.NFC : confWinners.AFC,
        homeSeed: afcSeed.seed <= nfcSeed.seed ? afcSeed.seed : nfcSeed.seed,
        awaySeed: afcSeed.seed <= nfcSeed.seed ? nfcSeed.seed : afcSeed.seed,
        played: false,
        homeScore: null,
        awayScore: null,
        winner: null
      };
    }

    return results.join("  ");
  }

  if (round === "SUPER_BOWL") {
    const g = season.playoffs.bracket.SUPER_BOWL.GAME;
    if (!g || g.played) return "";

    const res = simulateGame(g.home, g.away);
    g.played = true;
    g.homeScore = res.homeScore;
    g.awayScore = res.awayScore;
    g.winner = res.homeScore > res.awayScore ? g.home : g.away;

    season.playoffs.champion = g.winner;

    return formatResultLine(g);
  }

  return "";
}

function buildDivisionalRound(seed1, wildcardWinners, conf) {
  // wildcardWinners: array of { id, seed }
  const seeds = wildcardWinners.map((s) => s.seed).sort((a, b) => a - b);
  // lowest remaining seed plays #1
  const lowestSeed = seeds[0];
  const otherSeeds = seeds.slice(1);

  const lowestTeam = wildcardWinners.find((s) => s.seed === lowestSeed);
  const [sA, sB] = otherSeeds;
  const teamA = wildcardWinners.find((s) => s.seed === sA);
  const teamB = wildcardWinners.find((s) => s.seed === sB);

  const games = [];

  // Game 1: #1 vs lowest remaining
  games.push({
    id: `${conf}-DIV-1`,
    round: "DIVISIONAL",
    conference: conf,
    home: seed1.id,
    away: lowestTeam.id,
    homeSeed: seed1.seed,
    awaySeed: lowestTeam.seed,
    played: false,
    homeScore: null,
    awayScore: null,
    winner: null
  });

  // Game 2: other two winners
  games.push({
    id: `${conf}-DIV-2`,
    round: "DIVISIONAL",
    conference: conf,
    home: teamA.seed < teamB.seed ? teamA.id : teamB.id,
    away: teamA.seed < teamB.seed ? teamB.id : teamA.id,
    homeSeed: teamA.seed < teamB.seed ? teamA.seed : teamB.seed,
    awaySeed: teamA.seed < teamB.seed ? teamB.seed : teamA.seed,
    played: false,
    homeScore: null,
    awayScore: null,
    winner: null
  });

  return games;
}

function formatResultLine(game) {
  const homeConf = getConference(game.home);
  
  const homeTeam = teams.find((t) => t.id === game.home);
  const awayTeam = teams.find((t) => t.id === game.away);

  const homeName = homeTeam
    ? `${homeTeam.city} ${homeTeam.mascot}`
    : game.home;
  const awayName = awayTeam
    ? `${awayTeam.city} ${awayTeam.mascot}`
    : game.away;

  return `${homeConf || ""} ${game.round}: ${homeName} ${game.homeScore} - ${awayName} ${game.awayScore}`;
}


****************************************

src/components/team/playoffs/PlayoffsTab.jsx:

// src/components/team/playoffs/PlayoffsTab.jsx
import React from "react";
import styles from "./PlayoffsTab.module.css";
import { teams } from "../../../data/teams";

export default function PlayoffsTab({ season, userTeamId }) {
  if (!season?.playoffs) {
    return (
      <div className={styles.container}>
        Playoffs have not been initialized yet.
      </div>
    );
  }

  const { bracket } = season.playoffs;

  const getTeamName = (id) => {
    const t = teams.find((x) => x.id === id);
    return t ? `${t.city} ${t.mascot}` : id;
  };

  const isUserTeam = (id) => id === userTeamId;

  const renderGame = (g) => {
    if (!g) return null;

    const played = g.played;
    const winner = played && (g.homeScore > g.awayScore ? g.home : g.away);

    const rowClass = (teamId) =>
      `${styles.teamRow} 
       ${winner === teamId ? styles.winner : ""} 
       ${isUserTeam(teamId) ? styles.userTeam : ""}`;

    return (
      <div key={g.id} className={styles.gameBox}>
        <div className={rowClass(g.home)}>
          <span className={styles.seed}>#{g.homeSeed}</span>
          <span>{getTeamName(g.home)}</span>
          {played && <span className={styles.score}>{g.homeScore}</span>}
        </div>

        <div className={rowClass(g.away)}>
          <span className={styles.seed}>#{g.awaySeed}</span>
          <span>{getTeamName(g.away)}</span>
          {played && <span className={styles.score}>{g.awayScore}</span>}
        </div>
      </div>
    );
  };

  // Build user team playoff run
  const userRun = [];
  ["WILDCARD", "DIVISIONAL", "CONFERENCE"].forEach((round) => {
    ["AFC", "NFC"].forEach((conf) => {
      const games = bracket[round]?.[conf] || [];
      games.forEach((g) => {
        if (g.home === userTeamId || g.away === userTeamId) {
          userRun.push({ round, game: g });
        }
      });
    });
  });

  const sbGame = bracket.SUPER_BOWL?.GAME;
  if (sbGame && (sbGame.home === userTeamId || sbGame.away === userTeamId)) {
    userRun.push({ round: "SUPER_BOWL", game: sbGame });
  }

  return (
    <div className={styles.container}>
      {userRun.length > 0 && (
        <div className={styles.userRunBox}>
          <div className={styles.userRunHeader}>Your Playoff Run</div>
          {userRun.map(({ round, game }) => (
            <div key={game.id} className={styles.userRunRow}>
              <strong>{round.replace("_", " ")}:</strong>
              <span>
                {getTeamName(game.home)} vs {getTeamName(game.away)}
              </span>
              {game.played && (
                <span className={styles.userRunScore}>
                  {game.homeScore} - {game.awayScore}
                </span>
              )}
            </div>
          ))}
        </div>
      )}

      <div className={styles.bracketGrid}>
        {/* AFC side */}
        <div className={styles.confColumn}>
          <div className={styles.confHeader}>AFC</div>

          {["WILDCARD", "DIVISIONAL", "CONFERENCE"].map((round) => (
            <div key={round} className={styles.roundSection}>
              <div className={styles.roundHeader}>
                {round.replace("_", " ")}
              </div>
              <div className={styles.roundGrid}>
                {(bracket[round]?.AFC || []).map((g) => renderGame(g))}
              </div>
            </div>
          ))}
        </div>

        {/* Super Bowl center */}
        <div className={styles.centerColumn}>
          <div className={styles.confHeader}>SUPER BOWL</div>
          <div className={styles.roundSection}>
            <div className={styles.roundHeader}>Championship</div>
            <div className={styles.roundGrid}>
              {sbGame ? renderGame(sbGame) : <div>No matchup yet.</div>}
            </div>
          </div>
        </div>

        {/* NFC side */}
        <div className={styles.confColumn}>
          <div className={styles.confHeader}>NFC</div>

          {["WILDCARD", "DIVISIONAL", "CONFERENCE"].map((round) => (
            <div key={round} className={styles.roundSection}>
              <div className={styles.roundHeader}>
                {round.replace("_", " ")}
              </div>
              <div className={styles.roundGrid}>
                {(bracket[round]?.NFC || []).map((g) => renderGame(g))}
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}


**************************************

src/components/team/playoffs/PlayoffsTab.module.css:

/* src/components/team/playoffs/PlayoffsTab.module.css */

.container {
  padding: 20px;
  background-color: #0f111a;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  gap: 24px;
  color: #fff;
}

/* ROUND HEADER */
.roundSection {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.roundHeader {
  font-size: 1.1rem;
  font-weight: 700;
  color: #00d4ff;
  border-bottom: 2px solid #00d4ff;
  padding-bottom: 4px;
}

/* GAME GRID */
.roundGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 16px;
}

.gameBox {
  background: rgba(255, 255, 255, 0.06);
  border-radius: 10px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  transition: background 0.2s ease;
}

.gameBox:hover {
  background: rgba(0, 212, 255, 0.08);
}

.teamRow {
  display: grid;
  grid-template-columns: 40px 1fr 40px;
  align-items: center;
  font-size: 0.9rem;
}

.seed {
  color: #00d4ff;
  font-weight: 700;
}

.score {
  text-align: right;
  font-weight: 700;
}

.winner {
  color: #2ecc71;
  font-weight: 700;
}

.bracketGrid {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 20px;
}

.confColumn {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.centerColumn {
  display: flex;
  flex-direction: column;
  gap: 16px;
  align-items: center;
}

.confHeader {
  font-size: 1.1rem;
  font-weight: 700;
  color: #00d4ff;
  margin-bottom: 4px;
}

/* MOBILE */
@media (max-width: 768px) {
  .bracketGrid {
    grid-template-columns: 1fr;
  }
  .centerColumn {
    align-items: stretch;
  }
}

.userTeam {
  background: rgba(0, 212, 255, 0.15);
  border-left: 3px solid #00d4ff;
}

.userRunBox {
  background: rgba(255, 255, 255, 0.06);
  padding: 12px;
  border-radius: 10px;
  margin-bottom: 20px;
}

.userRunHeader {
  font-weight: 700;
  color: #00d4ff;
  margin-bottom: 6px;
}

.userRunRow {
  display: flex;
  justify-content: space-between;
  padding: 4px 0;
}

.userRunScore {
  font-weight: 700;
}

******************************


src/data/teams.js:

export const teams = [
  // -------------------- AFC NORTH --------------------
  { id: "BAL", city: "BAL", mascot: "Night Wings", conference: "AFC", division: "North", color: "#5A4FCF" },
  { id: "CIN", city: "CIN", mascot: "Striped Fury", conference: "AFC", division: "North", color: "#F77F2F" },
  { id: "CLE", city: "CLE", mascot: "Forge Hounds", conference: "AFC", division: "North", color: "#A65A2E" },
  { id: "PIT", city: "PIT", mascot: "Iron Hammers", conference: "AFC", division: "North", color: "#6E6E6E" },
  // -------------------- AFC EAST --------------------
  { id: "BUF", city: "BUF", mascot: "Frost Horns", conference: "AFC", division: "East", color: "#3A6FF7" },
  { id: "MIA", city: "MIA", mascot: "Neon Sharks", conference: "AFC", division: "East", color: "#00C9A7" },
  { id: "NE",  city: "NE",  mascot: "Rebel Rousers", conference: "AFC", division: "East", color: "#34495E" },
  { id: "NYJ", city: "NYJ", mascot: "Green Flight", conference: "AFC", division: "East", color: "#2ECC71" },
  // -------------------- AFC SOUTH --------------------
  { id: "HOU", city: "HOU", mascot: "Red Guardians", conference: "AFC", division: "South", color: "#C0392B" },
  { id: "IND", city: "IND", mascot: "Blue Chargers", conference: "AFC", division: "South", color: "#2E86DE" },
  { id: "JAX", city: "JAX", mascot: "Jungle Strikers", conference: "AFC", division: "South", color: "#D4A017" },
  { id: "TEN", city: "TEN", mascot: "Rail Breakers", conference: "AFC", division: "South", color: "#5DADE2" },
  // -------------------- AFC WEST --------------------
  { id: "DEN", city: "DEN", mascot: "Storm Riders", conference: "AFC", division: "West", color: "#FF7F50" },
  { id: "KC",  city: "KC",  mascot: "War Herd", conference: "AFC", division: "West", color: "#D63031" },
  { id: "LV",  city: "LV",  mascot: "Black Spades", conference: "AFC", division: "West", color: "#555555" },
  { id: "LAC", city: "LAC", mascot: "Volt Surge", conference: "AFC", division: "West", color: "#4DA6FF" },
  // -------------------- NFC NORTH --------------------
  { id: "CHI", city: "CHI", mascot: "War Dogs", conference: "NFC", division: "North", color: "#CA6F1E" },
  { id: "DET", city: "DET", mascot: "Motown Maulers", conference: "NFC", division: "North", color: "#5DADE2" },
  { id: "GB",  city: "GB",  mascot: "Green Machine", conference: "NFC", division: "North", color: "#27AE60" },
  { id: "MIN", city: "MIN", mascot: "Ice Wardens", conference: "NFC", division: "North", color: "#8E44AD" },
  // -------------------- NFC EAST --------------------
  { id: "DAL", city: "DAL", mascot: "Lone Stars", conference: "NFC", division: "East", color: "#2C3E50" },
  { id: "NYG", city: "NYG", mascot: "Empire Guardians", conference: "NFC", division: "East", color: "#3A6FF7" },
  { id: "PHI", city: "PHI", mascot: "Liberty Reign", conference: "NFC", division: "East", color: "#1ABC9C" },
  { id: "WAS", city: "WAS", mascot: "Capital Command", conference: "NFC", division: "East", color: "#884EA0" },
  // -------------------- NFC SOUTH --------------------
  { id: "ATL", city: "ATL", mascot: "Fire Birds", conference: "NFC", division: "South", color: "#E74C3C" },
  { id: "CAR", city: "CAR", mascot: "Black Claws", conference: "NFC", division: "South", color: "#2980B9" },
  { id: "NO",  city: "NO",  mascot: "Bayou Reapers", conference: "NFC", division: "South", color: "#D4AC0D" },
  { id: "TB",  city: "TB",  mascot: "Bay Pirates", conference: "NFC", division: "South", color: "#C0392B" },
  // -------------------- NFC WEST --------------------
  { id: "ARI", city: "ARI", mascot: "Red Talons", conference: "NFC", division: "West", color: "#C0392B" },
  { id: "LAR", city: "LAR", mascot: "Coast Crashers", conference: "NFC", division: "West", color: "#F1C40F" },
  { id: "SF",  city: "SF",  mascot: "Gold Rush", conference: "NFC", division: "West", color: "#D68910" },
  { id: "SEA", city: "SEA", mascot: "Rain Makers", conference: "NFC", division: "West", color: "#2ECC71" }
];
